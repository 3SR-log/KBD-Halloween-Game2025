<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒãƒ­ã‚¦ã‚£ãƒ³ãƒ“ãƒ³ã‚´</title>
    <style>
        body { text-align: center; font-family: 'Arial', sans-serif; background-color: #f7f7f7; color: #333; }
        .container { max-width: 600px; margin: 50px auto; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); background-color: #fff; position: relative; }
        
        /* æ–°ã—ã„ã‚¹ã‚¿ã‚¤ãƒ«: ãƒ¯ãƒ¼ãƒ‰æ•°è¡¨ç¤ºç”¨ã®è¦ç´  */
        #word-count { position: absolute; top: 10px; right: 10px; font-size: 1.2rem; font-weight: bold; color: #ff6600; }
        
        #countdown { font-size: 5rem; color: #ff6600; font-weight: bold; }
        #word-display { font-size: 3rem; color: #4CAF50; font-weight: bold; margin-top: 20px; }
        button { font-size: 1.5rem; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; background-color: #ff6600; color: white; margin-top: 20px; }
        
        #used-words-container { margin-top: 40px; }
        #used-words-container h2 { font-size: 1.5rem; color: #555; }
        #used-words-list { list-style-type: none; padding: 0; display: flex; flex-wrap: wrap; justify-content: center; }
        #used-words-list li { margin: 5px; padding: 10px; background-color: #eee; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <div id="word-count"></div>
        
        <h1>ãƒãƒ­ã‚¦ã‚£ãƒ³ãƒ“ãƒ³ã‚´</h1>
        <div id="countdown"></div>
        <div id="word-display"></div>
        <button onclick="startBingo()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
        
        <div id="used-words-container">
            <h2>å‡ºãŸãƒ¯ãƒ¼ãƒ‰</h2>
            <ul id="used-words-list"></ul>
        </div>
    </div>
    
    <script>
        let countdownTimer;

        function startBingo() {
            let count = 3;
            document.getElementById('countdown').textContent = '';
            document.getElementById('word-display').textContent = '';
            document.getElementById('used-words-list').innerHTML = '';
            document.getElementById('word-count').textContent = '0ãƒ¯ãƒ¼ãƒ‰ç›®'; // æ–°è¦è¿½åŠ 

            document.getElementById('countdown').textContent = count;
            document.querySelector('button').disabled = true;

            countdownTimer = setInterval(() => {
                count--;
                if (count > 0) {
                    document.getElementById('countdown').textContent = count;
                } else {
                    clearInterval(countdownTimer);
                    document.getElementById('countdown').textContent = 'ã‚¹ã‚¿ãƒ¼ãƒˆï¼';
                    getNewWord();
                }
            }, 1000);
        }

        async function getNewWord() {
            document.getElementById('countdown').textContent = '';
            document.getElementById('word-display').textContent = 'ğŸ‘»';
            const response = await fetch('/get_word');
            const data = await response.json();
            
            if (data.is_complete) {
                document.getElementById('word-display').textContent = data.word;
                document.querySelector('button').style.display = 'none';
                document.getElementById('word-count').textContent = `${data.used_words.length}ãƒ¯ãƒ¼ãƒ‰ç›®`; // æœ€çµ‚ãƒ¯ãƒ¼ãƒ‰æ•°ã®è¡¨ç¤º
            } else {
                document.getElementById('word-display').textContent = data.word;
                document.querySelector('button').textContent = 'æ¬¡ã®ãƒ¯ãƒ¼ãƒ‰';
                document.querySelector('button').disabled = false;
                
                // ã“ã“ã§å‡ºãŸãƒ¯ãƒ¼ãƒ‰ã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ ã™ã‚‹
                updateUsedWordsList(data.used_words);
            }
        }
        
        function updateUsedWordsList(words) {
            const list = document.getElementById('used-words-list');
            list.innerHTML = '';
            words.forEach(word => {
                const li = document.createElement('li');
                li.textContent = word;
                list.appendChild(li);
            });
            // æ–°è¦è¿½åŠ : ãƒ¯ãƒ¼ãƒ‰æ•°ã‚’æ›´æ–°
            document.getElementById('word-count').textContent = `${words.length}ãƒ¯ãƒ¼ãƒ‰ç›®`;
        }
    </script>
</body>
</html>
